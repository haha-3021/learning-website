{% extends 'base.html' %}
{% load static %}

{% block title %}ãƒ›ãƒ¼ãƒ  - Pythonå­¦ç¿’ã‚·ã‚¹ãƒ†ãƒ {% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/home.css' %}">
{% endblock %}

{% block content %}
<div class="welcome-section">
    <h2>ã‚ˆã†ã“ãï¼Pythonè¨˜éŒ²å¸³å­¦ç¿’ã‚·ã‚¹ãƒ†ãƒ ã¸ï¼</h2>
    <p>ã“ã®ã‚µã‚¤ãƒˆã§ã¯ã€ç©´åŸ‹ã‚å•é¡Œã‚„é¸æŠå•é¡Œã‚’è§£ããªãŒã‚‰ã€
        Pythonã¨Djangoã‚’ä½¿ã£ã¦ã€Œè³‡ç”£ãƒ»ç‰©å“ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã€ã‚’ä½œã‚‹æ–¹æ³•ã‚’å­¦ã¶ã“ã¨ãŒã§ãã¾ã™ã€‚</p>
    
    {% if not user.is_authenticated %}
    <div class="guest-message">
        <p><strong>å­¦ç¿’ã‚’å§‹ã‚ã‚‹ã«ã¯ã€ã¾ãšãƒ­ã‚°ã‚¤ãƒ³ã¾ãŸã¯æ–°è¦ç™»éŒ²ã—ã¦ãã ã•ã„ã€‚</strong></p>
    </div>
    {% endif %}
    
    <div class="learning-objectives">
    <br>
        <h3>ğŸ¯å­¦ç¿’ç›®æ¨™</h3>
        <ul>
            <li>Djangoãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®åŸºæœ¬çš„ãªä½¿ã„æ–¹ã‚’èº«ã«ã¤ã‘ã‚‹</li>
            <li>ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ¢ãƒ‡ãƒ«ã®è¨­è¨ˆã‚’ç†è§£ã™ã‚‹</li>
            <li>Webé–‹ç™ºã®åŸºç¤ã‚’å­¦ã¶</li>
            <li>ç°¡å˜ãªWebã‚¢ãƒ—ãƒªã‚’è‡ªåˆ†ã§ä½œã‚Œã‚‹ã‚ˆã†ã«ãªã‚‹</li>
        </ul>
    </div>
</div>

<div class="chapter-list">
    <h2>ğŸ“š å­¦ç¿’ã‚³ãƒ³ãƒ†ãƒ³ãƒ„</h2>
    
    {% for item in chapters_with_progress %}
    <div class="chapter-card">
        {% if item.chapter.image %}
        <div class="chapter-image">
            <img src="{{ item.chapter.image.url }}" alt="{{ item.chapter.title }}" style="max-width: 100%; height: auto; border-radius: 8px; margin-bottom: 1rem;">
        </div>
        {% endif %}
        
        <h3>ç¬¬{{ item.chapter.order }}ç« : {{ item.chapter.title }}</h3>
        <p>{{ item.chapter.description }}</p>
        
        <div class="progress-bar">
            <div class="progress-fill" data-progress="{{ item.progress_width }}"></div>
        </div>
        
        {% if user.is_authenticated %}
            <a href="{% url 'chapter_detail' item.chapter.id %}" class="btn">
                {% if item.progress_width == 100 %}
                    å¾©ç¿’ã™ã‚‹
                {% elif item.progress_width == 50 %}
                    å­¦ç¿’ã‚’ç¶šã‘ã‚‹
                {% else %}
                    å­¦ç¿’ã‚’å§‹ã‚ã‚‹
                {% endif %}
            </a>
        {% else %}
            <p><a href="{% url 'login' %}" class="btn">ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦å­¦ç¿’ã‚’å§‹ã‚ã‚‹</a></p>
        {% endif %}
    </div>
    {% empty %}
    <div class="chapter-card">
        <h3>ç¾åœ¨ã€åˆ©ç”¨ã§ãã‚‹å­¦ç¿’ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</h3>
        <p>ç®¡ç†è€…ã«é€£çµ¡ã—ã¦å­¦ç¿’ç« ã‚’è¿½åŠ ã—ã¦ãã ã•ã„ã€‚</p>
    </div>
    {% endfor %}
</div>

{% if show_guide %}
<div id="guide-overlay" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 10000; display: flex; justify-content: center; align-items: center; backdrop-filter: blur(5px);">
    <div style="background: white; padding: 2.5rem; border-radius: 20px; max-width: 500px; width: 90%; text-align: center; box-shadow: 0 10px 25px rgba(0,0,0,0.5); animation: guideSlideUp 0.5s ease-out;">
        <h2 style="color: #764ba2; margin-bottom: 1.5rem;">ğŸš€ å­¦ç¿’ã‚¬ã‚¤ãƒ‰</h2>
        
        <div style="text-align: left; background: #f8f9fa; padding: 1.5rem; border-radius: 15px; margin-bottom: 1.5rem;">
            <p style="margin: 10px 0;"><strong>ğŸ“ˆ çµŒé¨“å€¤ (XP):</strong> ãƒãƒ£ãƒ—ã‚¿ãƒ¼å®Œäº†ã§ +50 XPã€å•é¡Œæ­£è§£ã§ +10 XPï¼</p>
            <p style="margin: 10px 0;"><strong>ğŸ†™ ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—:</strong> çµŒé¨“å€¤ãŒè²¯ã¾ã‚‹ã¨ãƒ¬ãƒ™ãƒ«ãŒä¸ŠãŒã‚Šã€ç§°å·ãŒé€²åŒ–ã—ã¾ã™ã€‚</p>
            <p style="margin: 10px 0;"><strong>ğŸ§± ç©æœ¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«:</strong> ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—ã™ã‚‹ã¨ã€æ–°ã—ã„ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆç”¨ã®ç©æœ¨ãŒè§£æ”¾ã•ã‚Œã¾ã™ï¼</p>
        </div>
        
        <button onclick="document.getElementById('guide-overlay').remove()" style="background: #764ba2; color: white; border: none; padding: 12px 40px; border-radius: 50px; cursor: pointer; font-size: 1.1rem; font-weight: bold; transition: transform 0.2s;">
            ã‚ã‹ã£ãŸã€å­¦ç¿’ã‚’å§‹ã‚ã‚‹ï¼
        </button>
    </div>
</div>

<style>
@keyframes guideSlideUp {
    from { opacity: 0; transform: translateY(50px); }
    to { opacity: 1; transform: translateY(0); }
}
</style>
{% endif %}
<div class="system-requirements">
    <h3>ğŸ’» ã‚·ã‚¹ãƒ†ãƒ è¦ä»¶</h3>
    <div>
        <p><strong>Pythonãƒãƒ¼ã‚¸ãƒ§ãƒ³:</strong> 3.6 ä»¥ä¸Š</p>
        <p><strong>Djangoãƒãƒ¼ã‚¸ãƒ§ãƒ³:</strong> 3.2 ä»¥ä¸Š</p>
        <p><strong>ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹:</strong> SQLite (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ)</p>
        <p><strong>ãƒ–ãƒ©ã‚¦ã‚¶:</strong> Chromeã€Firefoxã€Safariã€ã¾ãŸã¯ Edge</p>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
// åˆå§‹åŒ–è¿›åº¦æ¡
document.addEventListener('DOMContentLoaded', function() {
    const progressFills = document.querySelectorAll('.progress-fill');
    progressFills.forEach(fill => {
        const progress = fill.getAttribute('data-progress');
        if (progress !== null) {
            fill.style.width = progress + '%';
        }
    });
});
</script>
{% endblock %}